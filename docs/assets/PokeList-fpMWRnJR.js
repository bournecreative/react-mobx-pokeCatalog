import{_ as v,a as x,i as k,h as P,b as j,p as N,j as t,L as b}from"./index-jcI3Ck9C.js";import{Q as w,u as y,a as M}from"./useQuery-Y2YvNClG.js";var $=function(n){v(o,n);function o(i,e){return n.call(this,i,e)||this}var a=o.prototype;return a.bindMethods=function(){n.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},a.setOptions=function(e,s){n.prototype.setOptions.call(this,x({},e,{behavior:k()}),s)},a.getOptimisticResult=function(e){return e.behavior=k(),n.prototype.getOptimisticResult.call(this,e)},a.fetchNextPage=function(e){var s;return this.fetch({cancelRefetch:(s=e==null?void 0:e.cancelRefetch)!=null?s:!0,throwOnError:e==null?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:e==null?void 0:e.pageParam}}})},a.fetchPreviousPage=function(e){var s;return this.fetch({cancelRefetch:(s=e==null?void 0:e.cancelRefetch)!=null?s:!0,throwOnError:e==null?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:e==null?void 0:e.pageParam}}})},a.createResult=function(e,s){var d,u,g,p,f,m,c=e.state,_=n.prototype.createResult.call(this,e,s);return x({},_,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:P(s,(d=c.data)==null?void 0:d.pages),hasPreviousPage:j(s,(u=c.data)==null?void 0:u.pages),isFetchingNextPage:c.isFetching&&((g=c.fetchMeta)==null||(p=g.fetchMore)==null?void 0:p.direction)==="forward",isFetchingPreviousPage:c.isFetching&&((f=c.fetchMeta)==null||(m=f.fetchMore)==null?void 0:m.direction)==="backward"})},o}(w);function R(n,o,a){var i=N(n,o,a);return y(i,$)}const O="_skeleton_zot7j_1",L="_beat_zot7j_1",F={skeleton:O,beat:L},h=({style:n})=>t.jsx("div",{className:F.skeleton,style:n}),r={"poke-item":"_poke-item_5un92_1","skeleton-item":"_skeleton-item_5un92_2","skeleton-content":"_skeleton-content_5un92_10","poke-container":"_poke-container_5un92_17","poke-heading":"_poke-heading_5un92_24","poke-index":"_poke-index_5un92_29","poke-stat":"_poke-stat_5un92_33"},E=({name:n,url:o})=>{const{data:a,isLoading:i}=M(["pokemon-detail",n],async()=>await fetch(o).then(e=>e.json()),{staleTime:6e5});return t.jsx(t.Fragment,{children:i?t.jsxs("div",{className:r["skeleton-item"],children:[t.jsx(h,{style:{width:96,height:96}}),t.jsxs("div",{className:r["skeleton-content"],children:[t.jsx(h,{style:{width:120,height:21}}),t.jsx(h,{style:{width:256,height:21}})]})]}):t.jsx(b,{to:`/react-mobx-pokeCatalog/details/${a.name}`,className:r["poke-item"],children:t.jsxs("div",{className:r["poke-container"],children:[t.jsxs("div",{className:r["poke-heading"],children:[t.jsxs("div",{className:r["poke-index"],children:["#",a.id,"."]}),t.jsx("strong",{children:a.name})]}),t.jsx("img",{src:a.sprites.other.dream_world.front_default,alt:a.name,width:"96",height:"96"}),t.jsxs("div",{className:r["poke-stats"],children:[t.jsxs("div",{className:r["poke-stat"],children:[t.jsx("strong",{children:"Weight: "}),a.weight,"lbs"]}),t.jsxs("div",{className:r["poke-stat"],children:[t.jsx("strong",{children:"Height: "}),a.height,"'"]})]})]})})})},l={"pokelist-banner":"_pokelist-banner_1upxd_1","pokelist-grid":"_pokelist-grid_1upxd_7","poke-button":"_poke-button_1upxd_19","grid-footer":"_grid-footer_1upxd_33"},I="/react-mobx-pokeCatalog/assets/Pokemon_logo-aHDVhyao.png",z=()=>{const{data:n,isLoading:o,fetchNextPage:a,hasNextPage:i}=R("pokemon-list",async({pageParam:e=0})=>await fetch(`https://pokeapi.co/api/v2/pokemon?limit=100&offset=${e*100}`).then(s=>s.json()).then(s=>({...s,page:e})).catch(s=>console.log(s)),{staleTime:6e5,getNextPageParam:e=>{if(e.next!==null)return e.page+1}});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:l["pokelist-banner"],children:t.jsx("img",{src:I,width:"400",height:"147"})}),t.jsx("div",{className:l["pokelist-grid"],children:!o&&(n==null?void 0:n.pages.map(e=>e.results.map(s=>t.jsx(E,{name:s.name,url:s.url},s.name))))}),i&&t.jsx("div",{className:l["grid-footer"],children:t.jsx("button",{className:l["poke-button"],onClick:()=>a(),children:"Load More"})})]})};export{z as default};
